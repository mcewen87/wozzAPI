{"version":3,"sources":["webpack:///./src/pages/userAuth.js"],"names":["UserAuth","state","email","password","isError","handleEmail","e","setState","target","value","handlePassword","userSignIn","a","fetch","process","mode","cache","credentials","headers","method","token","Cookies","get","body","JSON","stringify","catch","error","data","ok","console","log","json","then","content","props","changeAuth","authStatus","userSignUp","render","className","auth","authBox","Component","connect","isAuthed"],"mappings":"8gBAOMA,E,4JACJC,MAAQ,CACNC,MAAO,GACPC,SAAU,GACVC,SAAS,G,EAGXC,YAAc,SAAAC,GACZ,EAAKC,SAAS,CAAEL,MAAOI,EAAEE,OAAOC,S,EAGlCC,eAAiB,SAAAJ,GACf,EAAKC,SAAS,CAAEJ,SAAUG,EAAEE,OAAOC,S,EAGrCE,W,6BAAa,WAAOT,EAAOC,GAAd,iBAAAS,EAAA,sEACLC,MAAMC,sCAA8B,CACxCC,KAAM,OACNC,MAAO,WACPC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,OAAQ,QARC,cAULC,EAAQC,IAAQC,IAAI,cAVf,SAWQT,MAAMC,oCAA4B,CACnDS,KAAMC,KAAKC,UAAU,CAAEvB,MAAOA,EAAOC,SAAUA,IAC/CY,KAAM,OACNC,MAAO,WACPC,YAAa,UACbC,QAAS,CACP,eAAgB,mBAChB,aAAcE,GAEhBD,OAAQ,SACPO,OAAM,SAAAC,GAAK,OAAI,EAAKpB,SAAS,CAAEH,SAAS,OArBhC,QAWLwB,EAXK,QAsBFC,IACPC,QAAQC,IAAIH,EAAKC,IACjBD,EAAKI,OAAOC,MAAK,SAAAC,GACfJ,QAAQC,IAAIG,GACZ,EAAKC,MAAMC,WAAWF,EAAQG,YAC9B,EAAK9B,SAAS,CACZL,MAAO,GACPC,SAAU,GACVC,SAAS,QAIb,EAAKG,SAAS,CACZH,SAAS,IAnCF,2C,0DAwCbkC,W,6BAAa,WAAOpC,EAAOC,GAAd,iBAAAS,EAAA,sEACLC,MAAMC,sCAA8B,CACxCC,KAAM,OACNC,MAAO,WACPC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,OAAQ,QARC,cAULC,EAAQC,IAAQC,IAAI,cAVf,SAWQT,MAAMC,oCAA4B,CACnDS,KAAMC,KAAKC,UAAU,CAAEvB,MAAOA,EAAOC,SAAUA,IAC/CY,KAAM,OACNC,MAAO,WACPC,YAAa,UACbC,QAAS,CACP,eAAgB,mBAChB,aAAcE,GAEhBD,OAAQ,SACPO,OAAM,SAAAC,GAAK,OAAI,EAAKpB,SAAS,CAAEH,SAAS,OArBhC,QAWLwB,EAXK,QAsBFC,IACPC,QAAQC,IAAIH,EAAKC,IACjBD,EAAKI,OAAOC,MAAK,SAAAC,GACfJ,QAAQC,IAAIG,GACZ,EAAKC,MAAMC,WAAWF,EAAQG,YAC9B,EAAK9B,SAAS,CACZL,MAAO,GACPC,SAAU,GACVC,SAAS,QAIb,EAAKG,SAAS,CACZH,SAAS,IAnCF,2C,oKAwCbmC,OAAA,WACE,OACE,yBAAKC,UAAWC,IAAKC,SACnB,gH,GAlGeC,aA+GRC,uBAJf,SAAyB3C,GACvB,MAAO,CAAE4C,SAAU5C,EAAMoC,cAKzB,CAAED,gBAFWQ,CAGb5C","file":"component---src-pages-user-auth-js-481c1fafa5c5ecfaed03.js","sourcesContent":["import React, { Component } from \"react\"\nimport { connect } from \"react-redux\"\nimport { changeAuth } from \"../actions/changeAuth\"\nimport Cookies from \"js-cookie\"\n\nimport auth from \"../components/userAuth.module.scss\"\n\nclass UserAuth extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    isError: false,\n  }\n\n  handleEmail = e => {\n    this.setState({ email: e.target.value })\n  }\n\n  handlePassword = e => {\n    this.setState({ password: e.target.value })\n  }\n\n  userSignIn = async (email, password) => {\n    await fetch(process.env.API + \"getToken\", {\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      method: \"GET\",\n    })\n    const token = Cookies.get(\"XSRF-TOKEN\")\n    const data = await fetch(process.env.API + \"signIn\", {\n      body: JSON.stringify({ email: email, password: password }),\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n        \"csrf-token\": token,\n      },\n      method: \"POST\",\n    }).catch(error => this.setState({ isError: true }))\n    if (data.ok) {\n      console.log(data.ok)\n      data.json().then(content => {\n        console.log(content)\n        this.props.changeAuth(content.authStatus)\n        this.setState({\n          email: \"\",\n          password: \"\",\n          isError: false,\n        })\n      })\n    } else {\n      this.setState({\n        isError: true,\n      })\n    }\n  }\n\n  userSignUp = async (email, password) => {\n    await fetch(process.env.API + \"getToken\", {\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      method: \"GET\",\n    })\n    const token = Cookies.get(\"XSRF-TOKEN\")\n    const data = await fetch(process.env.API + \"signUp\", {\n      body: JSON.stringify({ email: email, password: password }),\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n        \"csrf-token\": token,\n      },\n      method: \"POST\",\n    }).catch(error => this.setState({ isError: true }))\n    if (data.ok) {\n      console.log(data.ok)\n      data.json().then(content => {\n        console.log(content)\n        this.props.changeAuth(content.authStatus)\n        this.setState({\n          email: \"\",\n          password: \"\",\n          isError: false,\n        })\n      })\n    } else {\n      this.setState({\n        isError: true,\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className={auth.authBox}>\n        <h1>\n          Hello, Friend. You're as brilliant as the best teeth in Hollywood. You\n          do you.\n        </h1>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return { isAuthed: state.authStatus }\n}\n\nexport default connect(\n  mapStateToProps,\n  { changeAuth }\n)(UserAuth)\n"],"sourceRoot":""}