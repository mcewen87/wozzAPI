{"version":3,"sources":["webpack:///./src/pages/userAuth.js","webpack:///./node_modules/js-cookie/src/js.cookie.js"],"names":["UserAuth","state","email","password","isError","handleEmail","e","setState","target","value","handlePassword","userSignIn","a","fetch","process","mode","cache","credentials","headers","method","token","Cookies","get","body","JSON","stringify","catch","error","data","ok","console","log","json","then","content","props","changeAuth","authStatus","userSignUp","render","className","auth","authBox","innerBox","this","errorMessage","placeholder","type","onChange","buttons","onClick","alert","Component","connect","isAuthed","factory","module","exports","OldCookies","window","api","noConflict","extend","i","result","arguments","length","attributes","key","decode","s","replace","decodeURIComponent","init","converter","set","document","path","defaults","expires","Date","toUTCString","test","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","jar","cookies","parts","slice","join","charAt","name","read","parse","getJSON","remove","withConverter"],"mappings":"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","file":"component---src-pages-user-auth-js-549cf6ab311aa54e3204.js","sourcesContent":["import React, { Component } from \"react\"\nimport { connect } from \"react-redux\"\nimport { changeAuth } from \"../actions/changeAuth\"\nimport Cookies from \"js-cookie\"\n\nimport auth from \"../components/userAuth.module.scss\"\n\nclass UserAuth extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    isError: false,\n  }\n\n  handleEmail = e => {\n    this.setState({ email: e.target.value })\n  }\n\n  handlePassword = e => {\n    this.setState({ password: e.target.value })\n  }\n\n  userSignIn = async (email, password) => {\n    await fetch(process.env.API + \"getToken\", {\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      method: \"GET\",\n    })\n    const token = Cookies.get(\"XSRF-TOKEN\")\n    const data = await fetch(process.env.API + \"signIn\", {\n      body: JSON.stringify({ email: email, password: password }),\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n        \"csrf-token\": token,\n      },\n      method: \"POST\",\n    }).catch(error => this.setState({ isError: true }))\n    if (data.ok) {\n      console.log(data.ok)\n      data.json().then(content => {\n        console.log(content)\n        this.props.changeAuth(content.authStatus)\n        this.setState({\n          email: \"\",\n          password: \"\",\n          isError: false,\n        })\n      })\n    } else {\n      this.setState({\n        isError: true,\n      })\n    }\n  }\n\n  userSignUp = async (email, password) => {\n    await fetch(process.env.API + \"getToken\", {\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      method: \"GET\",\n    })\n    const token = Cookies.get(\"XSRF-TOKEN\")\n    const data = await fetch(process.env.API + \"signUp\", {\n      body: JSON.stringify({ email: email, password: password }),\n      mode: \"cors\", // no-cors, cors, *include\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: \"include\", // include, *include, omit\n      headers: {\n        \"content-type\": \"application/json\",\n        \"csrf-token\": token,\n      },\n      method: \"POST\",\n    }).catch(error => this.setState({ isError: true }))\n    if (data.ok) {\n      console.log(data.ok)\n      data.json().then(content => {\n        console.log(content)\n        this.props.changeAuth(content.authStatus)\n        this.setState({\n          email: \"\",\n          password: \"\",\n          isError: false,\n        })\n      })\n    } else {\n      this.setState({\n        isError: true,\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className={auth.authBox}>\n        <div className={auth.innerBox}>\n          {this.state.isError && (\n            <p className={auth.errorMessage}>Oops, something went wrong.</p>\n          )}\n          <input\n            className=\"\"\n            placeholder=\"Email\"\n            type=\"text\"\n            value={this.state.email}\n            onChange={this.handleEmail}\n          />\n          <input\n            className=\"\"\n            placeholder=\"Password\"\n            type=\"password\"\n            value={this.state.password}\n            onChange={this.handlePassword}\n          />\n          <div className={auth.buttons}>\n            <button\n              onClick={() => {\n                this.userSignIn(this.state.email, this.state.password)\n              }}\n            >\n              Sign In\n            </button>\n            <button\n              onClick={() => {\n                this.userSignUp(this.state.email, this.state.password)\n              }}\n            >\n              Sing Up\n            </button>\n            <button\n              onClick={() => {\n                alert(\"Click Em\")\n              }}\n            >\n              Sing Out\n            </button>\n            <button\n              onClick={() => {\n                alert(\"auth\")\n              }}\n            >\n              Check Auth\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return { isAuthed: state.authStatus }\n}\n\nexport default connect(\n  mapStateToProps,\n  { changeAuth }\n)(UserAuth)\n","require(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\n/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;\n\n(function (factory) {\n  var registeredInModuleLoader;\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n    registeredInModuleLoader = true;\n  }\n\n  if (typeof exports === 'object') {\n    module.exports = factory();\n    registeredInModuleLoader = true;\n  }\n\n  if (!registeredInModuleLoader) {\n    var OldCookies = window.Cookies;\n    var api = window.Cookies = factory();\n\n    api.noConflict = function () {\n      window.Cookies = OldCookies;\n      return api;\n    };\n  }\n})(function () {\n  function extend() {\n    var i = 0;\n    var result = {};\n\n    for (; i < arguments.length; i++) {\n      var attributes = arguments[i];\n\n      for (var key in attributes) {\n        result[key] = attributes[key];\n      }\n    }\n\n    return result;\n  }\n\n  function decode(s) {\n    return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n  }\n\n  function init(converter) {\n    function api() {}\n\n    function set(key, value, attributes) {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      attributes = extend({\n        path: '/'\n      }, api.defaults, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n      } // We're using \"expires\" because \"max-age\" is not supported by IE\n\n\n      attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n      try {\n        var result = JSON.stringify(value);\n\n        if (/^[\\{\\[]/.test(result)) {\n          value = result;\n        }\n      } catch (e) {}\n\n      value = converter.write ? converter.write(value, key) : encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n      key = encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\\(\\)]/g, escape);\n      var stringifiedAttributes = '';\n\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue;\n        }\n\n        stringifiedAttributes += '; ' + attributeName;\n\n        if (attributes[attributeName] === true) {\n          continue;\n        } // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n\n\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n\n      return document.cookie = key + '=' + value + stringifiedAttributes;\n    }\n\n    function get(key, json) {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      var jar = {}; // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var i = 0;\n\n      for (; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var cookie = parts.slice(1).join('=');\n\n        if (!json && cookie.charAt(0) === '\"') {\n          cookie = cookie.slice(1, -1);\n        }\n\n        try {\n          var name = decode(parts[0]);\n          cookie = (converter.read || converter)(cookie, name) || decode(cookie);\n\n          if (json) {\n            try {\n              cookie = JSON.parse(cookie);\n            } catch (e) {}\n          }\n\n          jar[name] = cookie;\n\n          if (key === name) {\n            break;\n          }\n        } catch (e) {}\n      }\n\n      return key ? jar[key] : jar;\n    }\n\n    api.set = set;\n\n    api.get = function (key) {\n      return get(key, false\n      /* read as raw */\n      );\n    };\n\n    api.getJSON = function (key) {\n      return get(key, true\n      /* read as json */\n      );\n    };\n\n    api.remove = function (key, attributes) {\n      set(key, '', extend(attributes, {\n        expires: -1\n      }));\n    };\n\n    api.defaults = {};\n    api.withConverter = init;\n    return api;\n  }\n\n  return init(function () {});\n});"],"sourceRoot":""}